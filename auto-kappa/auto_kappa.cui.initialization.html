

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>auto_kappa.cui.initialization module &mdash; auto-kappa 1.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=f2178272" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=fc837d61"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="auto_kappa.cui.suggest module" href="auto_kappa.cui.suggest.html" />
    <link rel="prev" title="auto_kappa.cui.compat module" href="auto_kappa.cui.compat.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            auto-kappa
              <img src="../_static/ak_logo.png" class="logo" alt="Logo"/>
          </a>

          <div class="project-version">
            ver. 1.1.0
          </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">2. How to use auto-kappa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../params_ak.html">3. Parameters for auto-kappa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../params_vasp.html">4. Parameters for VASP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">5. Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">6. auto_kappa</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="auto_kappa.html">6.1. auto_kappa package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="auto_kappa.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="auto_kappa.alamode.html">auto_kappa.alamode package</a></li>
<li class="toctree-l4"><a class="reference internal" href="auto_kappa.almlog.html">auto_kappa.almlog package</a></li>
<li class="toctree-l4"><a class="reference internal" href="auto_kappa.calculators.html">auto_kappa.calculators package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="auto_kappa.cui.html">auto_kappa.cui package</a></li>
<li class="toctree-l4"><a class="reference internal" href="auto_kappa.io.html">auto_kappa.io package</a></li>
<li class="toctree-l4"><a class="reference internal" href="auto_kappa.plot.html">auto_kappa.plot package</a></li>
<li class="toctree-l4"><a class="reference internal" href="auto_kappa.structure.html">auto_kappa.structure package</a></li>
<li class="toctree-l4"><a class="reference internal" href="auto_kappa.utils.html">auto_kappa.utils package</a></li>
<li class="toctree-l4"><a class="reference internal" href="auto_kappa.vasp.html">auto_kappa.vasp package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="auto_kappa.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="auto_kappa.html#module-auto_kappa">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">auto-kappa</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html"><span class="section-number">6. </span>auto_kappa</a></li>
          <li class="breadcrumb-item"><a href="auto_kappa.html"><span class="section-number">6.1. </span>auto_kappa package</a></li>
          <li class="breadcrumb-item"><a href="auto_kappa.cui.html">auto_kappa.cui package</a></li>
      <li class="breadcrumb-item active">auto_kappa.cui.initialization module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/auto-kappa/auto_kappa.cui.initialization.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-auto_kappa.cui.initialization">
<span id="auto-kappa-cui-initialization-module"></span><h1>auto_kappa.cui.initialization module<a class="headerlink" href="#module-auto_kappa.cui.initialization" title="Link to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="auto_kappa.cui.initialization.get_base_directory_name">
<span class="sig-prename descclassname"><span class="pre">auto_kappa.cui.initialization.</span></span><span class="sig-name descname"><span class="pre">get_base_directory_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restart</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#auto_kappa.cui.initialization.get_base_directory_name" title="Link to this definition"></a></dt>
<dd><p>Return the base directory name with an absolute path</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="auto_kappa.cui.initialization.get_previous_nac">
<span class="sig-prename descclassname"><span class="pre">auto_kappa.cui.initialization.</span></span><span class="sig-name descname"><span class="pre">get_previous_nac</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#auto_kappa.cui.initialization.get_previous_nac" title="Link to this definition"></a></dt>
<dd><p>Get previously-used NAC parameter. If it cannot be found, return None.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="auto_kappa.cui.initialization.get_required_parameters">
<span class="sig-prename descclassname"><span class="pre">auto_kappa.cui.initialization.</span></span><span class="sig-name descname"><span class="pre">get_required_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_directory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dir_phdb</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_structure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_natoms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">celltype_relax_given</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#auto_kappa.cui.initialization.get_required_parameters" title="Link to this definition"></a></dt>
<dd><p>Return the required parameters for the automation calculation:
structures, transformation matrices, and k-meshes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base_directory</strong> (<em>string</em>) – base output directory</p></li>
<li><p><strong>dir_phdb</strong> (<em>string</em>) – Directory of Phonondb</p></li>
<li><p><strong>file_structure</strong> (<em>string</em>) – structure file name. <code class="docutils literal notranslate"><span class="pre">dir_phdb</span></code> or <code class="docutils literal notranslate"><span class="pre">file_structure</span></code> must be given
while, if both of them are given, <code class="docutils literal notranslate"><span class="pre">dir_phdb</span></code> is used.</p></li>
<li><p><strong>max_natoms</strong><strong>(</strong><strong>3</strong><strong>)</strong> (<em>int</em>) – maximum limit of the number of atoms in the supercell for FC2(3)</p></li>
<li><p><strong>k_length</strong> (<em>float</em>)</p></li>
<li><p><strong>celltype_relax_given</strong> (<em>string</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>structures</strong> (<em>dict of Structure obj.</em>) – keys=[“primitive”, “unitcell”, “supercell”, “supercell3”]</p></li>
<li><p><strong>trans_matrices</strong> (<em>dict of arrays</em>) – keys=[“primitive”, “supercell”, “supercell3”]
transformation matrices for the corresponding structures</p></li>
<li><p><strong>kpts_suggested</strong> (<em>dict of arrays</em>) – keys=[“primitive”, “unitcell”, “supercell”, supercell3]
kpoints suggested based on the given structures</p></li>
<li><p><strong>kpts_prev</strong> (<em>dict of arrays</em>) – keys=[“relax”, “nac”, “harm”, “cube”]
kpoints which have been used for previous calculations</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="auto_kappa.cui.initialization.read_parameters_from_phonondb">
<span class="sig-prename descclassname"><span class="pre">auto_kappa.cui.initialization.</span></span><span class="sig-name descname"><span class="pre">read_parameters_from_phonondb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir_phdb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k_length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#auto_kappa.cui.initialization.read_parameters_from_phonondb" title="Link to this definition"></a></dt>
<dd><p>Read data in the given Phonondb directory and suggest parameters for FC3</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For Phonondb, the conventional cell is used for both of the
relaxation and NAC calculations. Auto-kappa, however, can accept
different cell types while the default types are the conventional and
primitive cells for the relaxation and NAC, respectively. Therefore,
the k-meshes used for Phonondb basically will not be used for the
automation calculation.</p>
</div>
<p class="rubric">Example</p>
<p>The Phonondb data directory typically includes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BORN</span>           <span class="n">FORCE_SETS</span>       <span class="n">INCAR</span><span class="o">-</span><span class="n">nac</span>       <span class="n">KPOINTS</span><span class="o">-</span><span class="n">force</span>
<span class="n">KPOINTS</span><span class="o">-</span><span class="n">relax</span>  <span class="n">phonon</span><span class="o">.</span><span class="n">yaml</span>      <span class="n">POSCAR</span><span class="o">-</span><span class="n">unitcell</span> <span class="n">disp</span><span class="o">.</span><span class="n">yaml</span>
<span class="n">INCAR</span><span class="o">-</span><span class="n">force</span>    <span class="n">INCAR</span><span class="o">-</span><span class="n">relax</span>      <span class="n">KPOINTS</span><span class="o">-</span><span class="n">nac</span>     <span class="n">PAW_dataset</span><span class="o">.</span><span class="n">txt</span>
<span class="n">phonopy</span><span class="o">.</span><span class="n">conf</span>   <span class="n">POSCAR</span><span class="o">-</span><span class="n">unitcell</span><span class="o">.</span><span class="n">yaml</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="auto_kappa.cui.initialization.read_phonondb">
<span class="sig-prename descclassname"><span class="pre">auto_kappa.cui.initialization.</span></span><span class="sig-name descname"><span class="pre">read_phonondb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#auto_kappa.cui.initialization.read_phonondb" title="Link to this definition"></a></dt>
<dd><p>Read data in Phonondb. Phonondb is used to obtain structures
(primitive, unit, and super cells) and k-points.</p>
<p>Note that the definition of transformation matrix in Phononpy (Phonondb)
is different from that in ASE and Pymatgen.
With Phonopy definition    : P = mat_u2p_pp   &#64; U
With ASE or pmg definition : P = mat_u2p_pp.T &#64; U
_pp in <code class="docutils literal notranslate"><span class="pre">mat_u2p_pp</span></code> and <code class="docutils literal notranslate"><span class="pre">mat_u2s_pp</span></code> denotes Phonopy.</p>
<section id="to-do">
<h2>To do<a class="headerlink" href="#to-do" title="Link to this heading"></a></h2>
<p>If the material is not contained in Phonondb, the trasnformation
matrices need to be obtained with the same manner as spglib. Pymatgen
may not be able to be used because of different definitions of the
transformation matrix in Phonopy and Pymatgen.</p>
</section>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="auto_kappa.cui.initialization.use_omp_for_anphon">
<span class="sig-prename descclassname"><span class="pre">auto_kappa.cui.initialization.</span></span><span class="sig-name descname"><span class="pre">use_omp_for_anphon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#auto_kappa.cui.initialization.use_omp_for_anphon" title="Link to this definition"></a></dt>
<dd><p>Read log files for previous calculations and check the memory.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="auto_kappa.cui.compat.html" class="btn btn-neutral float-left" title="auto_kappa.cui.compat module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="auto_kappa.cui.suggest.html" class="btn btn-neutral float-right" title="auto_kappa.cui.suggest module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Masato Ohnishi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>